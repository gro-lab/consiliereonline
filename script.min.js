"use strict";function debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}function throttle(e,t){let n=0;return function(...o){const i=Date.now();i-n>=t&&(n=i,e.apply(this,o))}}const CookieConsent={banner:null,settingsModal:null,floatingButton:null,isShown:!1,preferences:{essential:!0,analytics:!1,marketing:!1,thirdParty:!1},init(){this.banner=document.getElementById("cookieBanner"),this.settingsModal=document.getElementById("cookieSettingsModal"),this.floatingButton=document.getElementById("cookieSettingsFloat"),this.banner&&(this.loadPreferences(),this.hasConsentDecision()?(this.applyPreferences(),this.showFloatingButton()):(this.showBanner(),this.hideFloatingButton()),this.setupEventListeners())},loadPreferences(){try{const e=localStorage.getItem("cookiePreferences");if(e){const t=JSON.parse(e);this.preferences={...this.preferences,...t},this.preferences.essential=!0}}catch(e){console.warn("Could not load cookie preferences")}},savePreferences(){try{localStorage.setItem("cookiePreferences",JSON.stringify(this.preferences)),localStorage.setItem("cookieConsent","custom"),this.trackConsentChange()}catch(e){console.warn("Could not save cookie preferences")}},hasConsentDecision(){try{return null!==localStorage.getItem("cookieConsent")}catch(e){return!1}},hasAccepted(){try{const e=localStorage.getItem("cookieConsent");return"accepted"===e||"custom"===e&&this.preferences.analytics}catch(e){return!1}},hasThirdPartyConsent(){return!0===this.preferences.thirdParty},showBanner(){!this.isShown&&this.banner&&requestAnimationFrame(()=>{this.banner.classList.add("show"),this.isShown=!0,this.trapFocus()})},hideBanner(){this.banner&&(this.banner.classList.remove("show"),this.isShown=!1,this.removeFocusTrap(),this.showFloatingButton())},showFloatingButton(){this.floatingButton&&requestAnimationFrame(()=>{this.floatingButton.classList.add("show")})},hideFloatingButton(){this.floatingButton&&this.floatingButton.classList.remove("show")},setupEventListeners(){const e=document.getElementById("cookieAccept"),t=document.getElementById("cookieReject"),n=document.getElementById("cookieSettings");e&&e.addEventListener("click",()=>this.acceptAllCookies()),t&&t.addEventListener("click",()=>this.rejectAllCookies()),n&&n.addEventListener("click",()=>this.openSettings());const o=document.getElementById("analyticsCookies"),i=document.getElementById("marketingCookies"),s=document.getElementById("thirdPartyCookies");o&&(o.checked=this.preferences.analytics,o.addEventListener("change",e=>{this.preferences.analytics=e.target.checked})),i&&(i.checked=this.preferences.marketing,i.addEventListener("change",e=>{this.preferences.marketing=e.target.checked})),s&&(s.checked=this.preferences.thirdParty,s.addEventListener("change",e=>{this.preferences.thirdParty=e.target.checked})),document.addEventListener("keydown",e=>{this.isShown&&"Escape"===e.key&&e.preventDefault()})},acceptAllCookies(){this.preferences={essential:!0,analytics:!0,marketing:!0,thirdParty:!0},this.savePreferences();try{localStorage.setItem("cookieConsent","accepted"),localStorage.setItem("cookieConsentDate",(new Date).toISOString())}catch(e){console.warn("Could not save cookie consent")}this.applyPreferences(),this.hideBanner(),this.closeSettings(),this.trackConsentGiven("accepted"),this.reinitializeForms()},rejectAllCookies(){this.preferences={essential:!0,analytics:!1,marketing:!1,thirdParty:!1},this.savePreferences();try{localStorage.setItem("cookieConsent","rejected"),localStorage.setItem("cookieConsentDate",(new Date).toISOString())}catch(e){console.warn("Could not save cookie consent")}this.applyPreferences(),this.hideBanner(),this.closeSettings(),this.trackConsentGiven("rejected"),this.reinitializeForms()},saveCustomPreferences(){this.savePreferences(),this.applyPreferences(),this.hideBanner(),this.closeSettings(),this.trackConsentGiven("custom"),this.reinitializeForms()},applyPreferences(){this.preferences.analytics?this.loadAnalytics():this.removeAnalytics(),this.preferences.marketing?this.loadMarketing():this.removeMarketing(),this.preferences.thirdParty?this.enableThirdPartyServices():this.disableThirdPartyServices()},enableThirdPartyServices(){console.log("Enabling third-party services...");document.querySelectorAll(".consent-notice").forEach(e=>e.remove());const e=document.getElementById("eventRegistrationForm");if(e){e.classList.remove("consent-required");e.querySelectorAll("input, textarea, button").forEach(e=>{e.disabled=!1,e.removeAttribute("disabled")});const t=e.querySelector('button[type="submit"]');if(t){const e=t.getAttribute("data-original-text");t.innerHTML=e||'\n                        <span lang="en">Register for Event</span>\n                        <span lang="ro">Înregistrează-te la Eveniment</span>\n                    ',t.disabled=!1,t.style.cursor="pointer",t.style.opacity="1"}console.log("Event form enabled successfully")}document.querySelectorAll('form[data-requires-consent="true"]').forEach(e=>{e.classList.remove("consent-required");e.querySelectorAll("input, textarea, button").forEach(e=>{e.disabled=!1,e.removeAttribute("disabled")})}),console.log("Third-party services enabled")},disableThirdPartyServices(){console.log("Disabling third-party services...");const e=document.getElementById("eventRegistrationForm");if(e){if(!e.querySelector(".consent-notice")){const t=document.createElement("div");t.className="consent-notice",t.innerHTML='\n                    <p>\n                        <span lang="ro">Pentru a utiliza acest formular, trebuie să acceptați cookie-urile terțe în </span>\n                        <span lang="en">To use this form, you need to accept third-party cookies in </span>\n                        <button onclick="openCookieSettings()" style="text-decoration: underline; border: none; background: none; color: #4169e1; cursor: pointer;">\n                            <span lang="ro">Setări Cookie</span>\n                            <span lang="en">Cookie Settings</span>\n                        </button>\n                    </p>\n                ',e.insertBefore(t,e.firstChild)}const t=e.querySelector('button[type="submit"]');if(t){const e=t.innerHTML;t.setAttribute("data-original-text",e),t.innerHTML='\n                    <span lang="ro">Necesită Consimțământ pentru Cookie-uri</span>\n                    <span lang="en">Requires Cookie Consent</span>\n                ',t.disabled=!0,t.style.cursor="not-allowed",t.style.opacity="0.6"}}console.log("Third-party services disabled")},reinitializeForms(){if(console.log("Reinitializing forms after cookie consent change..."),window.dispatchEvent(new CustomEvent("cookieConsentChanged",{detail:{preferences:this.preferences,hasThirdPartyConsent:this.hasThirdPartyConsent()}})),window.GDPRFormHandler){window.GDPRFormHandler.checkThirdPartyCookies();const e=document.getElementById("eventRegistrationForm");if(e&&this.hasThirdPartyConsent()){e.style.opacity="1",e.style.pointerEvents="auto";const t=e.querySelector('input:not([type="hidden"])');t&&t.focus()}}},openSettings(){if(!this.settingsModal)return;const e=document.getElementById("analyticsCookies"),t=document.getElementById("marketingCookies"),n=document.getElementById("thirdPartyCookies");e&&(e.checked=this.preferences.analytics),t&&(t.checked=this.preferences.marketing),n&&(n.checked=this.preferences.thirdParty),requestAnimationFrame(()=>{this.settingsModal.style.display="block",this.settingsModal.offsetHeight,this.settingsModal.classList.add("show"),document.body.style.overflow="hidden",this.settingsModal.setAttribute("tabindex","-1"),this.settingsModal.focus()})},closeSettings(){this.settingsModal&&(this.settingsModal.classList.remove("show"),setTimeout(()=>{this.settingsModal.style.display="none",document.body.style.overflow=""},300))},loadAnalytics(){if(window.gtag)return;const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=AW-17401674061",e.id="google-analytics",document.head.appendChild(e),e.onload=()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","AW-17401674061",{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure",allow_google_signals:!1,allow_ad_personalization_signals:!1}),window.gtag_report_appointment=function(t){return e("event","appointment_booking",{event_category:"engagement",event_label:"phone_call",value:1}),void 0!==t&&(window.location=t),!1},console.log("Google Analytics loaded with consent")},e.onerror=()=>{console.warn("Failed to load Google Analytics")}},removeAnalytics(){const e=document.getElementById("google-analytics");e&&e.remove(),this.clearCookies(["_ga","_gid","_gat"])},loadMarketing(){console.log("Marketing cookies enabled")},removeMarketing(){console.log("Marketing cookies disabled")},clearCookies(e){e.forEach(e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.${window.location.hostname}`})},trackConsentChange(){const e={timestamp:(new Date).toISOString(),preferences:this.preferences,action:"preferences_updated"};try{const t=JSON.parse(localStorage.getItem("consentHistory")||"[]");t.push(e),t.length>10&&t.shift(),localStorage.setItem("consentHistory",JSON.stringify(t))}catch(e){console.warn("Could not save consent history")}},trackConsentGiven(e){if(navigator.sendBeacon){JSON.stringify({event:"cookie_consent",choice:e,preferences:this.preferences,timestamp:(new Date).toISOString(),page:window.location.pathname})}this.trackConsentChange()},trapFocus(){if(!this.banner)return;const e=this.banner.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],n=e[e.length-1];this.focusTrapHandler=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))},document.addEventListener("keydown",this.focusTrapHandler),t&&t.focus()},removeFocusTrap(){this.focusTrapHandler&&(document.removeEventListener("keydown",this.focusTrapHandler),this.focusTrapHandler=null)}},GDPRFormHandler={form:null,isInitialized:!1,init(){if(this.form=document.getElementById("eventRegistrationForm"),!this.form)return;this.isInitialized=!0,this.checkThirdPartyCookies(),this.form.addEventListener("submit",e=>{e.preventDefault(),this.handleSubmit(this.form)});this.form.querySelectorAll('input[type="checkbox"][required]').forEach(e=>{e.addEventListener("change",()=>{this.validateConsentField(e)})}),window.addEventListener("cookieConsentChanged",e=>{console.log("Cookie consent changed, updating form state...",e.detail),this.handleCookieConsentChange(e.detail)})},handleCookieConsentChange(e){e.hasThirdPartyConsent?(console.log("Third-party consent granted, enabling form..."),this.enableForm()):(console.log("Third-party consent not granted, disabling form..."),this.disableForm())},checkThirdPartyCookies(){this.form&&(CookieConsent.hasThirdPartyConsent()?this.enableForm():this.disableForm())},enableForm(){if(!this.form)return;console.log("Enabling event registration form...");this.form.querySelectorAll(".consent-notice").forEach(e=>e.remove()),this.form.classList.remove("consent-required"),this.form.style.opacity="1",this.form.style.pointerEvents="auto";this.form.querySelectorAll("input, textarea, select").forEach(e=>{e.disabled=!1,e.removeAttribute("disabled"),e.style.cursor="auto",e.style.opacity="1"});const e=this.form.querySelector('button[type="submit"]');if(e){e.disabled=!1,e.style.cursor="pointer",e.style.opacity="1";const t=e.getAttribute("data-original-text");t?(e.innerHTML=t,e.removeAttribute("data-original-text")):e.innerHTML='\n                    <span lang="en">Register for Event</span>\n                    <span lang="ro">Înregistrează-te la Eveniment</span>\n                '}const t=document.getElementById("formErrors");t&&(t.style.display="none",t.innerHTML=""),this.form.style.transition="all 0.3s ease",this.form.style.border="2px solid #4CAF50",setTimeout(()=>{this.form.style.border=""},2e3),console.log("Form enabled successfully")},disableForm(){if(!this.form)return;if(console.log("Disabling event registration form..."),!this.form.querySelector(".consent-notice")){const e=document.createElement("div");e.className="consent-notice",e.innerHTML='\n                <p>\n                    <span lang="ro">Pentru a utiliza acest formular, trebuie să acceptați cookie-urile terțe. </span>\n                    <span lang="en">To use this form, you need to accept third-party cookies. </span>\n                    <button onclick="openCookieSettings()" style="text-decoration: underline; border: none; background: none; color: #4169e1; cursor: pointer; font-weight: 600;">\n                        <span lang="ro">Deschide Setări Cookie</span>\n                        <span lang="en">Open Cookie Settings</span>\n                    </button>\n                </p>\n            ',this.form.insertBefore(e,this.form.firstChild)}this.form.classList.add("consent-required");const e=this.form.querySelector('button[type="submit"]');e&&(e.hasAttribute("data-original-text")||e.setAttribute("data-original-text",e.innerHTML),e.disabled=!0,e.style.cursor="not-allowed",e.style.opacity="0.6",e.innerHTML='\n                <span lang="ro">Necesită Consimțământ Cookie</span>\n                <span lang="en">Requires Cookie Consent</span>\n            '),console.log("Form disabled - requires cookie consent")},validateConsentField(e){const t=`${e.id}-error`;let n=document.getElementById(t);return e.checked?(n&&n.remove(),e.setAttribute("aria-invalid","false"),!0):(n||(n=document.createElement("span"),n.id=t,n.className="consent-error",n.innerHTML='\n                    <span lang="ro">Acest câmp este obligatoriu pentru conformitate GDPR</span>\n                    <span lang="en">This field is required for GDPR compliance</span>\n                ',e.parentElement.appendChild(n)),e.setAttribute("aria-invalid","true"),!1)},validateAllConsents(e){const t=e.querySelectorAll('input[type="checkbox"][required]');let n=!0;return t.forEach(e=>{this.validateConsentField(e)||(n=!1)}),n},handleSubmit(e){const t=document.getElementById("formErrors");if(t&&(t.style.display="none",t.innerHTML=""),!CookieConsent.hasThirdPartyConsent())return void this.showError("form","third_party_cookies_required");if(!this.validateAllConsents(e))return void this.showError("form","missing_consents");const n=e.querySelector('input[type="email"]');n&&n.value?this.isValidEmail(n.value)?this.submitForm(e):this.showError("email","invalid"):this.showError("email","required")},isValidEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),showError(e,t){const n=document.getElementById("formErrors");if(!n)return;const o={third_party_cookies_required:{ro:"Pentru a trimite formularul, trebuie să acceptați cookie-urile terțe în Setările Cookie.",en:"To submit the form, you need to accept third-party cookies in Cookie Settings."},missing_consents:{ro:"Vă rugăm să bifați toate căsuțele de consimțământ obligatorii.",en:"Please check all required consent boxes."},email_required:{ro:"Adresa de email este obligatorie.",en:"Email address is required."},email_invalid:{ro:"Vă rugăm să introduceți o adresă de email validă.",en:"Please enter a valid email address."}},i=o[`${e}_${t}`]||o[t];i&&(n.innerHTML=`\n                <span lang="ro">${i.ro}</span>\n                <span lang="en">${i.en}</span>\n            `,n.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}),n.style.animation="shake 0.5s",setTimeout(()=>{n.style.animation=""},500))},submitForm(e){const t=e.querySelector('button[type="submit"]');t.innerHTML;t.disabled=!0,t.innerHTML='\n            <span lang="ro">Se trimite...</span>\n            <span lang="en">Sending...</span>\n        ',t.style.position="relative",t.style.overflow="hidden";const n=document.createElement("span");if(n.style.cssText="\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            width: 20px;\n            height: 20px;\n            border: 2px solid rgba(255, 255, 255, 0.3);\n            border-top-color: white;\n            border-radius: 50%;\n            animation: spin 1s linear infinite;\n        ",t.appendChild(n),!document.querySelector("style[data-spinner]")){const e=document.createElement("style");e.setAttribute("data-spinner","true"),e.textContent="\n                @keyframes spin {\n                    to { transform: translate(-50%, -50%) rotate(360deg); }\n                }\n                @keyframes shake {\n                    0%, 100% { transform: translateX(0); }\n                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n                    20%, 40%, 60%, 80% { transform: translateX(5px); }\n                }\n            ",document.head.appendChild(e)}this.trackFormSubmission(e),e.submit()},trackFormSubmission(e){const t={timestamp:(new Date).toISOString(),form:"event_registration",consents:{dataProcessing:document.getElementById("dataProcessingConsent")?.checked||!1,internationalTransfer:document.getElementById("internationalTransferConsent")?.checked||!1,privacyPolicy:document.getElementById("privacyPolicyConsent")?.checked||!1}};try{const e=JSON.parse(localStorage.getItem("formSubmissions")||"[]");e.push(t),e.length>5&&e.shift(),localStorage.setItem("formSubmissions",JSON.stringify(e))}catch(e){console.warn("Could not save form submission data")}"undefined"!=typeof gtag&&CookieConsent.hasAccepted()&&gtag("event","form_submit",{event_category:"GDPR_Compliant_Form",event_label:"Event Registration",consents_given:!0})}},LanguageManager={currentLang:"ro",init(){const e=this.getSavedLanguage(),t=navigator.language.toLowerCase();e&&["ro","en"].includes(e)?this.currentLang=e:t.startsWith("en")&&(this.currentLang="en"),this.setLanguage(this.currentLang),this.setupLanguageButtons()},getSavedLanguage(){try{return localStorage.getItem("language")}catch(e){return null}},setLanguage(e){if(["ro","en"].includes(e)){this.currentLang=e,requestAnimationFrame(()=>{document.body.classList.toggle("lang-ro","ro"===e),document.documentElement.lang=e,document.querySelectorAll(".lang-btn").forEach(t=>{t.classList.toggle("active",t.dataset.lang===e),t.setAttribute("aria-pressed",t.dataset.lang===e)}),document.querySelectorAll(".nav-link").forEach(t=>{const n="ro"===e?t.dataset.ro:t.dataset.en;n&&(t.textContent=n)})});try{localStorage.setItem("language",e)}catch(e){console.warn("localStorage not available")}this.updatePageMeta(e),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:e}}))}},setupLanguageButtons(){document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.setLanguage(e.dataset.lang)})})},updatePageMeta(e){const t={ro:"Consiliere Online România | Life Coach & Dezvoltare Personală | Răzvan Mischie",en:"Online Counseling Romania | Life Coach & Personal Development | Răzvan Mischie"};document.title=t[e]||t.ro;const n={ro:"Consiliere online profesională pentru dezvoltare personală în România. Life coaching pentru echilibru emoțional, claritate în viață și creștere personală.",en:"Professional online counseling for personal development in Romania. Life coaching for emotional balance, life clarity and personal growth."},o=document.querySelector('meta[name="description"]');o&&(o.content=n[e]||n.ro)}},MobileMenu={isOpen:!1,menu:null,toggle:null,init(){this.menu=document.getElementById("navMenu"),this.toggle=document.querySelector(".mobile-menu-toggle"),this.toggle&&(this.toggle.addEventListener("click",()=>this.toggleMenu()),this.toggle.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleMenu())})),document.addEventListener("click",e=>{this.isOpen&&!e.target.closest(".nav-container")&&this.closeMenu()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen&&(this.closeMenu(),this.toggle.focus())}),this.menu?.addEventListener("click",e=>{e.target.classList.contains("nav-link")&&this.closeMenu()})},toggleMenu(){this.isOpen=!this.isOpen,requestAnimationFrame(()=>{this.menu.classList.toggle("active",this.isOpen),this.toggle.setAttribute("aria-expanded",this.isOpen),this.animateHamburger(this.isOpen)})},closeMenu(){this.isOpen=!1,requestAnimationFrame(()=>{this.menu.classList.remove("active"),this.toggle.setAttribute("aria-expanded","false"),this.animateHamburger(!1)})},animateHamburger(e){const t=this.toggle.querySelectorAll("span");e?(t[0].style.transform="rotate(45deg) translateY(8px)",t[1].style.opacity="0",t[2].style.transform="rotate(-45deg) translateY(-8px)"):t.forEach(e=>{e.style.transform="",e.style.opacity=""})}};class Carousel{constructor(){this.currentSlide=0,this.autoPlayInterval=null,this.touchStartX=0,this.touchEndX=0,this.track=null,this.slides=[],this.dots=[],this.isTransitioning=!1,this.slideWidth=0,this.trackWidth=0,this.eventImages=["./consiliere-online-razvan-mischie-event-1.jpg","./consiliere-online-razvan-mischie-event-2.jpg","./consiliere-online-razvan-mischie-event-3.jpg"],this.eventCaptions=[{ro:"Atelier de Re-cunoaștere - 25 Iunie, 19:00 - 22:00 - 35 RON",en:"Recognition Workshop - June 25, 7:00 PM - 10:00 PM - 35 RON"},{ro:"Atelier: Interese Specifice - 26 Iulie, 18:00 - 20:00 - 35 RON",en:"Workshop: Specific Interests - July 26, 6:00 PM - 8:00 PM - 35 RON"},{ro:"Comunicarea și Nuanțele Ei - 10 Iulie, 18:30 - 21:30 - 35 RON",en:"Communication & Its Nuances - July 10, 6:30 PM - 9:30 PM - 35 RON"}]}init(){this.track=document.getElementById("carouselTrack"),this.track&&(this.slides=Array.from(this.track.querySelectorAll(".carousel-slide")),this.cacheElementDimensions(),this.createDots(),this.setupEventListeners(),this.preloadImages(),window.matchMedia("(prefers-reduced-motion: reduce)").matches||this.startAutoPlay())}cacheElementDimensions(){if(this.slides.length>0){const e=this.slides[0];this.slideWidth=e.offsetWidth,this.trackWidth=this.slideWidth*this.slides.length}}setupEventListeners(){this.track.addEventListener("touchstart",e=>this.handleTouchStart(e),{passive:!0}),this.track.addEventListener("touchend",e=>this.handleTouchEnd(e),{passive:!0});let e=!1;this.track.addEventListener("mousedown",t=>{e=!0,this.touchStartX=t.clientX}),this.track.addEventListener("mouseup",t=>{e&&(this.touchEndX=t.clientX,this.handleSwipe()),e=!1}),this.track.addEventListener("mouseleave",()=>{e=!1});const t=document.querySelector(".carousel-nav.prev"),n=document.querySelector(".carousel-nav.next");t&&t.addEventListener("click",()=>this.move(-1)),n&&n.addEventListener("click",()=>this.move(1));const o=document.querySelector(".carousel-container");o&&(o.addEventListener("keydown",e=>{"ArrowLeft"===e.key?this.move(-1):"ArrowRight"===e.key&&this.move(1)}),o.addEventListener("mouseenter",()=>this.stopAutoPlay()),o.addEventListener("mouseleave",()=>this.startAutoPlay())),document.addEventListener("visibilitychange",()=>{document.hidden?this.stopAutoPlay():this.startAutoPlay()}),window.addEventListener("resize",debounce(()=>this.cacheElementDimensions(),250))}preloadImages(){this.eventImages.forEach((e,t)=>{if(t>0){(new Image).src=e}})}createDots(){const e=document.getElementById("carouselDots");e&&(e.innerHTML="",this.dots=[],this.slides.forEach((t,n)=>{const o=document.createElement("button");o.className="carousel-dot"+(0===n?" active":""),o.setAttribute("aria-label",`Mergi la slide ${n+1}`),o.setAttribute("aria-current",0===n?"true":"false"),o.addEventListener("click",()=>this.goToSlide(n)),e.appendChild(o),this.dots.push(o)}))}handleTouchStart(e){this.touchStartX=e.changedTouches[0].screenX}handleTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){const e=this.touchStartX-this.touchEndX;Math.abs(e)>50&&this.move(e>0?1:-1)}move(e){this.isTransitioning||(this.currentSlide=(this.currentSlide+e+this.slides.length)%this.slides.length,this.updateCarousel(),this.resetAutoPlay())}goToSlide(e){this.isTransitioning||e===this.currentSlide||(this.currentSlide=e,this.updateCarousel(),this.resetAutoPlay())}updateCarousel(){this.isTransitioning=!0,requestAnimationFrame(()=>{this.track.style.transform=`translateX(${100*-this.currentSlide}%)`,this.dots.forEach((e,t)=>{const n=t===this.currentSlide;e.classList.toggle("active",n),e.setAttribute("aria-current",n?"true":"false")})}),setTimeout(()=>{this.isTransitioning=!1},500),this.announceSlide()}announceSlide(){const e=document.createElement("div");e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.className="sr-only",e.textContent=`Slide ${this.currentSlide+1} din ${this.slides.length}`,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&document.body.removeChild(e)},1e3)}startAutoPlay(){this.autoPlayInterval||(this.autoPlayInterval=setInterval(()=>{this.move(1)},5e3))}stopAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}resetAutoPlay(){this.stopAutoPlay(),this.startAutoPlay()}}const Modal={modal:null,modalImg:null,modalCaption:null,isOpen:!1,init(){this.modal=document.getElementById("imageModal"),this.modalImg=document.getElementById("modalImage"),this.modalCaption=document.getElementById("modalCaption"),this.modal&&(this.modal.addEventListener("click",e=>{(e.target===this.modal||e.target.classList.contains("modal-close"))&&this.close()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen&&this.close()}))},open(e){if(!this.modal||!carousel)return;const t=LanguageManager.currentLang;requestAnimationFrame(()=>{this.modal.style.display="block",this.modal.offsetHeight,this.modal.classList.add("show"),this.modalImg.src=carousel.eventImages[e],this.modalImg.alt=`Imagine eveniment ${e+1}`,this.modalCaption.textContent=carousel.eventCaptions[e][t],document.body.style.overflow="hidden",this.isOpen=!0,this.modal.setAttribute("tabindex","-1"),this.modal.focus(),this.trapFocus()})},close(){this.modal&&(this.modal.classList.remove("show"),setTimeout(()=>{this.modal.style.display="none",document.body.style.overflow="",this.isOpen=!1;const e=document.querySelector(`#event${this.lastOpenedIndex+1}`);e&&e.focus()},300))},trapFocus(){const e=this.modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],n=e[e.length-1];this.modal.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))})}},PrivacyModal={modal:null,isOpen:!1,init(){this.modal=document.getElementById("privacyModal"),this.modal&&(this.modal.addEventListener("click",e=>{e.target===this.modal&&this.close()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen&&this.close()}))},open(){this.modal&&requestAnimationFrame(()=>{this.modal.style.display="block",this.modal.offsetHeight,this.modal.classList.add("show"),document.body.style.overflow="hidden",this.isOpen=!0,this.modal.setAttribute("tabindex","-1"),this.modal.focus(),this.trapFocus()})},close(){this.modal&&(this.modal.classList.remove("show"),setTimeout(()=>{this.modal.style.display="none",document.body.style.overflow="",this.isOpen=!1},300))},trapFocus(){const e=this.modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],n=e[e.length-1];this.modal.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))})}},Navigation={sections:[],navLinks:[],sectionData:[],init(){this.sections=document.querySelectorAll("section[id]"),this.navLinks=document.querySelectorAll(".nav-link"),this.cacheSectionData(),this.navLinks.forEach(e=>{e.addEventListener("click",e=>this.smoothScroll(e))}),window.addEventListener("scroll",throttle(()=>this.updateActiveSection(),100),{passive:!0}),window.addEventListener("resize",debounce(()=>this.cacheSectionData(),250)),this.updateActiveSection()},cacheSectionData(){this.sectionData=Array.from(this.sections).map(e=>({id:e.getAttribute("id"),top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight}))},smoothScroll(e){e.preventDefault();const t=e.currentTarget.getAttribute("href").slice(1),n=document.getElementById(t);if(n){const e=80,o=n.offsetTop-e;window.scrollTo({top:o,behavior:"smooth"}),MobileMenu.closeMenu(),history.pushState(null,null,`#${t}`)}},updateActiveSection(){const e=window.scrollY+100;for(const t of this.sectionData)if(e>=t.top&&e<t.bottom){requestAnimationFrame(()=>{this.navLinks.forEach(e=>{const n=e.getAttribute("href")===`#${t.id}`;e.classList.toggle("active",n),e.setAttribute("aria-current",n?"page":"false")})});break}}},AnimationObserver={init(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("fade-in"),e.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".section-paragraph, .faq-item, .service-card, .stat-item").forEach(t=>e.observe(t))}},FormHandler={init(){const e=document.querySelector(".contact-form");if(!e)return;e.addEventListener("submit",t=>{t.preventDefault(),this.handleSubmit(e)});e.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",()=>this.clearFieldError(e))})},handleSubmit(e){const t=new FormData(e);Object.fromEntries(t);if(!this.validateForm(e))return;const n=e.querySelector('button[type="submit"]'),o=n.textContent;n.textContent="Se trimite...",n.disabled=!0,setTimeout(()=>{this.showMessage("Mulțumim! Vă vom contacta în curând.","success"),e.reset(),n.textContent=o,n.disabled=!1,"undefined"!=typeof gtag&&CookieConsent.hasAccepted()&&gtag("event","form_submit",{event_category:"Contact",event_label:"Consultation Request"})},1500)},validateForm(e){const t=e.querySelectorAll("[required]");let n=!0;return t.forEach(e=>{this.validateField(e)||(n=!1)}),n},validateField(e){const t=e.value.trim();let n=!0;return this.clearFieldError(e),e.hasAttribute("required")&&!t&&(this.showFieldError(e,"Acest câmp este obligatoriu"),n=!1),"email"===e.type&&t&&!this.isValidEmail(t)&&(this.showFieldError(e,"Introduceți o adresă de email validă"),n=!1),"tel"===e.type&&t&&!this.isValidPhone(t)&&(this.showFieldError(e,"Introduceți un număr de telefon valid"),n=!1),n},isValidEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),isValidPhone:e=>/^(\+4|)?(07[0-8]{1}[0-9]{7}|02[0-9]{8}|03[0-9]{8})$/.test(e.replace(/\s/g,"")),showFieldError(e,t){e.classList.add("error");let n=e.nextElementSibling;n&&n.classList.contains("field-error")||(n=document.createElement("span"),n.className="field-error",e.parentNode.insertBefore(n,e.nextSibling)),n.textContent=t},clearFieldError(e){e.classList.remove("error");const t=e.nextElementSibling;t&&t.classList.contains("field-error")&&t.remove()},showMessage(e,t="info"){const n=document.createElement("div");n.className=`form-message ${t}`,n.textContent=e,n.setAttribute("role","alert");const o=document.querySelector(".contact-form");o&&(o.parentNode.insertBefore(n,o),setTimeout(()=>{n.parentNode&&n.remove()},5e3))}},PerformanceMonitor={init(){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>50&&console.warn("Long task detected:",t)});try{e.observe({entryTypes:["longtask"]})}catch(e){}}this.observeWebVitals()},observeWebVitals(){if("PerformanceObserver"in window)try{new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];console.log("LCP:",n.startTime)}).observe({entryTypes:["largest-contentful-paint"]})}catch(e){}}},EventData={upcomingEvents:{"@context":"https://schema.org","@type":"EventSeries",name:"Ateliere de Dezvoltare Personală",description:"Serie de workshop-uri pentru dezvoltare personală și creștere interioară",organizer:{"@type":"Person",name:"Răzvan Mischie"},location:{"@type":"VirtualLocation",url:"https://consiliereonline.com/events"}},init(){this.updateEventVisibility()},updateEventVisibility(){new Date}};let carousel;window.openModal=e=>{Modal.lastOpenedIndex=e,Modal.open(e)},window.closeModal=()=>Modal.close(),window.openPrivacyModal=()=>PrivacyModal.open(),window.closePrivacyModal=()=>PrivacyModal.close(),window.moveCarousel=e=>carousel&&carousel.move(e),window.setLanguage=e=>LanguageManager.setLanguage(e),window.toggleMobileMenu=()=>MobileMenu.toggleMenu(),window.openCookieSettings=()=>{CookieConsent.openSettings(),CookieConsent.hasThirdPartyConsent()||setTimeout(()=>{const e=document.querySelector("#thirdPartyCookies")?.closest(".cookie-category");if(e&&(e.style.border="2px solid #4CAF50",e.style.backgroundColor="#f0fff0",e.scrollIntoView({behavior:"smooth",block:"center"}),e.style.animation="pulse 2s ease-in-out 3",!document.querySelector("style[data-pulse-animation]"))){const e=document.createElement("style");e.setAttribute("data-pulse-animation","true"),e.textContent="\n                        @keyframes pulse {\n                            0%, 100% { transform: scale(1); }\n                            50% { transform: scale(1.02); }\n                        }\n                    ",document.head.appendChild(e)}},300)},window.closeCookieSettings=()=>CookieConsent.closeSettings(),window.acceptAllCookies=()=>{const e=document.getElementById("analyticsCookies"),t=document.getElementById("marketingCookies"),n=document.getElementById("thirdPartyCookies");e&&(e.checked=!0),t&&(t.checked=!0),n&&(n.checked=!0),CookieConsent.acceptAllCookies()},window.rejectAllCookies=()=>{const e=document.getElementById("analyticsCookies"),t=document.getElementById("marketingCookies"),n=document.getElementById("thirdPartyCookies");e&&(e.checked=!1),t&&(t.checked=!1),n&&(n.checked=!1),CookieConsent.rejectAllCookies()},window.savePreferences=()=>{const e=document.querySelector(".cookie-btn-primary");if(e){const t=e.innerHTML;e.innerHTML='\n            <span lang="ro">Salvat ✓</span>\n            <span lang="en">Saved ✓</span>\n        ',setTimeout(()=>{e.innerHTML=t},2e3)}CookieConsent.saveCustomPreferences()};const ServiceWorkerManager={registration:null,updateAvailable:!1,init(){"serviceWorker"in navigator&&"file:"!==window.location.protocol&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js",{scope:"./",updateViaCache:"none"}).then(e=>{this.registration=e,console.log("ServiceWorker registration successful with scope:",e.scope),e.update(),e.addEventListener("updatefound",()=>{console.log("Service Worker update found!");const t=e.installing;t&&t.addEventListener("statechange",()=>{console.log("Service Worker state changed to:",t.state),"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New service worker available!"),this.updateAvailable=!0,this.showUpdateNotification(t)):console.log("Service Worker installed for the first time"))})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("Controller changed, reloading page..."),this.updateAvailable&&window.location.reload()}),setInterval(()=>{e.update()},36e5)}).catch(e=>{console.log("ServiceWorker registration failed:",e)})}),document.addEventListener("visibilitychange",()=>{!document.hidden&&this.registration&&this.registration.update()}))},showUpdateNotification(e){const t=document.querySelector(".update-notification");t&&t.remove();const n=document.createElement("div");if(n.className="update-notification",n.innerHTML='\n            <div class="update-notification-content">\n                <p>\n                    <span lang="ro">O versiune nouă este disponibilă! 🎉</span>\n                    <span lang="en">A new version is available! 🎉</span>\n                </p>\n                <div class="update-notification-actions">\n                    <button class="update-btn update-btn-primary" onclick="ServiceWorkerManager.applyUpdate()">\n                        <span lang="ro">Actualizează Acum</span>\n                        <span lang="en">Update Now</span>\n                    </button>\n                    <button class="update-btn update-btn-secondary" onclick="ServiceWorkerManager.dismissUpdate()">\n                        <span lang="ro">Mai Târziu</span>\n                        <span lang="en">Later</span>\n                    </button>\n                </div>\n            </div>\n        ',n.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: white;\n            color: #333;\n            padding: 1.5rem;\n            border-radius: 12px;\n            z-index: 9999;\n            box-shadow: 0 10px 40px rgba(0,0,0,0.2);\n            max-width: 350px;\n            animation: slideIn 0.3s ease;\n            border: 2px solid #4CAF50;\n        ",!document.querySelector("style[data-update-notification]")){const e=document.createElement("style");e.setAttribute("data-update-notification","true"),e.textContent="\n                @keyframes slideIn {\n                    from {\n                        transform: translateX(400px);\n                        opacity: 0;\n                    }\n                    to {\n                        transform: translateX(0);\n                        opacity: 1;\n                    }\n                }\n                \n                .update-notification-content {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 1rem;\n                }\n                \n                .update-notification-content p {\n                    margin: 0;\n                    font-size: 1rem;\n                    font-weight: 500;\n                    color: #333;\n                }\n                \n                .update-notification-actions {\n                    display: flex;\n                    gap: 0.75rem;\n                }\n                \n                .update-btn {\n                    padding: 0.5rem 1rem;\n                    border: none;\n                    border-radius: 6px;\n                    cursor: pointer;\n                    font-size: 0.9rem;\n                    font-weight: 500;\n                    transition: all 0.2s ease;\n                    font-family: inherit;\n                    flex: 1;\n                }\n                \n                .update-btn-primary {\n                    background: #4CAF50;\n                    color: white;\n                }\n                \n                .update-btn-primary:hover {\n                    background: #45a049;\n                    transform: translateY(-1px);\n                }\n                \n                .update-btn-secondary {\n                    background: #f0f0f0;\n                    color: #666;\n                }\n                \n                .update-btn-secondary:hover {\n                    background: #e0e0e0;\n                }\n            ",document.head.appendChild(e)}document.body.appendChild(n),this.newWorker=e,setTimeout(()=>{n.parentNode&&(n.style.animation="slideOut 0.3s ease forwards",setTimeout(()=>n.remove(),300))},3e4)},applyUpdate(){this.newWorker?this.newWorker.postMessage({type:"SKIP_WAITING"}):this.registration&&this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})},dismissUpdate(){const e=document.querySelector(".update-notification");e&&(e.style.animation="slideOut 0.3s ease forwards",setTimeout(()=>e.remove(),300)),this.showUpdateIndicator()},showUpdateIndicator(){const e=document.createElement("div");if(e.className="update-indicator",e.innerHTML='\n            <button onclick="ServiceWorkerManager.showUpdateNotification(ServiceWorkerManager.newWorker)" \n                    title="Update Available" \n                    aria-label="Update Available">\n                🔄\n            </button>\n        ',e.style.cssText="\n            position: fixed;\n            bottom: 70px;\n            left: 20px;\n            background: #4CAF50;\n            color: white;\n            width: 40px;\n            height: 40px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            z-index: 1000;\n            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n            animation: pulse 2s infinite;\n        ",!document.querySelector("style[data-update-indicator]")){const e=document.createElement("style");e.setAttribute("data-update-indicator","true"),e.textContent="\n                @keyframes pulse {\n                    0%, 100% { transform: scale(1); }\n                    50% { transform: scale(1.1); }\n                }\n                \n                .update-indicator button {\n                    background: transparent;\n                    border: none;\n                    color: white;\n                    cursor: pointer;\n                    font-size: 1.2rem;\n                    width: 100%;\n                    height: 100%;\n                    padding: 0;\n                }\n            ",document.head.appendChild(e)}document.body.appendChild(e)}};window.ServiceWorkerManager=ServiceWorkerManager,window.GDPRFormHandler=GDPRFormHandler,document.addEventListener("DOMContentLoaded",()=>{console.log("🚀 Consiliere Online - Initializing with GDPR Compliance...");try{CookieConsent.init(),GDPRFormHandler.init(),LanguageManager.init(),MobileMenu.init(),Navigation.init(),Modal.init(),PrivacyModal.init(),AnimationObserver.init(),FormHandler.init(),EventData.init(),ServiceWorkerManager.init(),PerformanceMonitor.init(),carousel=new Carousel,carousel.init(),console.log("✅ All modules initialized successfully with GDPR compliance"),window.dispatchEvent(new CustomEvent("consiliereonlineReady",{detail:{timestamp:Date.now(),gdprCompliant:!0}}))}catch(e){console.error("❌ Initialization error:",e),document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.lang;document.body.classList.toggle("lang-ro","ro"===t)})})}}),window.addEventListener("error",e=>{console.error("Global error:",e.error),"undefined"!=typeof gtag&&CookieConsent.hasAccepted()&&gtag("event","exception",{description:e.error.message,fatal:!1})}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),"undefined"!=typeof gtag&&CookieConsent.hasAccepted()&&gtag("event","exception",{description:e.reason?.message||"Promise rejection",fatal:!1})}),"undefined"!=typeof module&&module.exports&&(module.exports={CookieConsent:CookieConsent,LanguageManager:LanguageManager,MobileMenu:MobileMenu,Carousel:Carousel,Modal:Modal,PrivacyModal:PrivacyModal,Navigation:Navigation,AnimationObserver:AnimationObserver,FormHandler:FormHandler,GDPRFormHandler:GDPRFormHandler,PerformanceMonitor:PerformanceMonitor,EventData:EventData,ServiceWorkerManager:ServiceWorkerManager});