"use strict";function debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}function throttle(e,t){let n=0;return function(...o){const i=Date.now();i-n>=t&&(n=i,e.apply(this,o))}}const CookieConsent={banner:null,isShown:!1,init(){this.banner=document.getElementById("cookieBanner"),this.banner&&(this.hasConsentDecision()?this.hasAccepted()&&this.loadAnalytics():this.showBanner(),this.setupEventListeners())},hasConsentDecision(){try{const e=localStorage.getItem("cookieConsent");return"accepted"===e||"rejected"===e}catch(e){return!1}},hasAccepted(){try{return"accepted"===localStorage.getItem("cookieConsent")}catch(e){return!1}},showBanner(){!this.isShown&&this.banner&&requestAnimationFrame(()=>{this.banner.classList.add("show"),this.isShown=!0,this.trapFocus()})},hideBanner(){this.banner&&(this.banner.classList.remove("show"),this.isShown=!1,this.removeFocusTrap())},setupEventListeners(){const e=document.getElementById("cookieAccept"),t=document.getElementById("cookieReject");e&&e.addEventListener("click",()=>this.acceptCookies()),t&&t.addEventListener("click",()=>this.rejectCookies()),document.addEventListener("keydown",e=>{this.isShown&&"Escape"===e.key&&e.preventDefault()})},acceptCookies(){try{localStorage.setItem("cookieConsent","accepted")}catch(e){console.warn("Could not save cookie consent")}this.loadAnalytics(),this.hideBanner(),this.trackConsentGiven("accepted")},rejectCookies(){try{localStorage.setItem("cookieConsent","rejected")}catch(e){console.warn("Could not save cookie consent")}this.hideBanner(),this.trackConsentGiven("rejected")},loadAnalytics(){if(!this.hasAccepted())return;const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=AW-17401674061",document.head.appendChild(e),e.onload=()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","AW-17401674061",{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure"}),window.gtag_report_conversion=function(t){return e("event","conversion",{send_to:"AW-17401674061/yl43CML9yf4aEM3y4elA",event_callback:function(){void 0!==t&&(window.location=t)}}),!1},console.log("Google Analytics loaded with consent")},e.onerror=()=>{console.warn("Failed to load Google Analytics")}},trackConsentGiven(e){if(navigator.sendBeacon){JSON.stringify({event:"cookie_consent",choice:e,timestamp:(new Date).toISOString(),page:window.location.pathname})}},trapFocus(){if(!this.banner)return;const e=this.banner.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],n=e[e.length-1];this.focusTrapHandler=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))},document.addEventListener("keydown",this.focusTrapHandler),t&&t.focus()},removeFocusTrap(){this.focusTrapHandler&&(document.removeEventListener("keydown",this.focusTrapHandler),this.focusTrapHandler=null)}},LanguageManager={currentLang:"ro",init(){const e=this.getSavedLanguage(),t=navigator.language.toLowerCase();e&&["ro","en"].includes(e)?this.currentLang=e:t.startsWith("en")&&(this.currentLang="en"),this.setLanguage(this.currentLang),this.setupLanguageButtons()},getSavedLanguage(){try{return localStorage.getItem("language")}catch(e){return null}},setLanguage(e){if(["ro","en"].includes(e)){this.currentLang=e,requestAnimationFrame(()=>{document.body.classList.toggle("lang-ro","ro"===e),document.documentElement.lang=e,document.querySelectorAll(".lang-btn").forEach(t=>{t.classList.toggle("active",t.dataset.lang===e),t.setAttribute("aria-pressed",t.dataset.lang===e)}),document.querySelectorAll(".nav-link").forEach(t=>{const n="ro"===e?t.dataset.ro:t.dataset.en;n&&(t.textContent=n)})});try{localStorage.setItem("language",e)}catch(e){console.warn("localStorage not available")}this.updatePageMeta(e),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:e}}))}},setupLanguageButtons(){document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.setLanguage(e.dataset.lang)})})},updatePageMeta(e){const t={ro:"Consiliere Online RomÃ¢nia | Life Coach & Dezvoltare PersonalÄƒ | RÄƒzvan Mischie",en:"Online Counseling Romania | Life Coach & Personal Development | RÄƒzvan Mischie"};document.title=t[e]||t.ro;const n={ro:"Consiliere online profesionalÄƒ pentru dezvoltare personalÄƒ Ã®n RomÃ¢nia. Life coaching pentru echilibru emoÈ›ional, claritate Ã®n viaÈ›Äƒ È™i creÈ™tere personalÄƒ.",en:"Professional online counseling for personal development in Romania. Life coaching for emotional balance, life clarity and personal growth."},o=document.querySelector('meta[name="description"]');o&&(o.content=n[e]||n.ro)}},MobileMenu={isOpen:!1,menu:null,toggle:null,init(){this.menu=document.getElementById("navMenu"),this.toggle=document.querySelector(".mobile-menu-toggle"),this.toggle&&(this.toggle.addEventListener("click",()=>this.toggleMenu()),this.toggle.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleMenu())})),document.addEventListener("click",e=>{this.isOpen&&!e.target.closest(".nav-container")&&this.closeMenu()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen&&(this.closeMenu(),this.toggle.focus())}),this.menu?.addEventListener("click",e=>{e.target.classList.contains("nav-link")&&this.closeMenu()})},toggleMenu(){this.isOpen=!this.isOpen,requestAnimationFrame(()=>{this.menu.classList.toggle("active",this.isOpen),this.toggle.setAttribute("aria-expanded",this.isOpen),this.animateHamburger(this.isOpen)})},closeMenu(){this.isOpen=!1,requestAnimationFrame(()=>{this.menu.classList.remove("active"),this.toggle.setAttribute("aria-expanded","false"),this.animateHamburger(!1)})},animateHamburger(e){const t=this.toggle.querySelectorAll("span");e?(t[0].style.transform="rotate(45deg) translateY(8px)",t[1].style.opacity="0",t[2].style.transform="rotate(-45deg) translateY(-8px)"):t.forEach(e=>{e.style.transform="",e.style.opacity=""})}};class Carousel{constructor(){this.currentSlide=0,this.autoPlayInterval=null,this.touchStartX=0,this.touchEndX=0,this.track=null,this.slides=[],this.dots=[],this.isTransitioning=!1,this.slideWidth=0,this.trackWidth=0,this.eventImages=["./consiliere-online-razvan-mischie-event-1.jpg","./consiliere-online-razvan-mischie-event-2.jpg","./consiliere-online-razvan-mischie-event-3.jpg"],this.eventCaptions=[{ro:"Atelier de Re-cunoaÈ™tere - 25 Iunie, 19:00 - 22:00 - 35 RON",en:"Recognition Workshop - June 25, 7:00 PM - 10:00 PM - 35 RON"},{ro:"Atelier: Interese Specifice - 26 Iulie, 18:00 - 20:00 - 35 RON",en:"Workshop: Specific Interests - July 26, 6:00 PM - 8:00 PM - 35 RON"},{ro:"Comunicarea È™i NuanÈ›ele Ei - 10 Iulie, 18:30 - 21:30 - 35 RON",en:"Communication & Its Nuances - July 10, 6:30 PM - 9:30 PM - 35 RON"}]}init(){this.track=document.getElementById("carouselTrack"),this.track&&(this.slides=Array.from(this.track.querySelectorAll(".carousel-slide")),this.cacheElementDimensions(),this.createDots(),this.setupEventListeners(),this.preloadImages(),window.matchMedia("(prefers-reduced-motion: reduce)").matches||this.startAutoPlay())}cacheElementDimensions(){if(this.slides.length>0){const e=this.slides[0];this.slideWidth=e.offsetWidth,this.trackWidth=this.slideWidth*this.slides.length}}setupEventListeners(){this.track.addEventListener("touchstart",e=>this.handleTouchStart(e),{passive:!0}),this.track.addEventListener("touchend",e=>this.handleTouchEnd(e),{passive:!0});let e=!1;this.track.addEventListener("mousedown",t=>{e=!0,this.touchStartX=t.clientX}),this.track.addEventListener("mouseup",t=>{e&&(this.touchEndX=t.clientX,this.handleSwipe()),e=!1}),this.track.addEventListener("mouseleave",()=>{e=!1});const t=document.querySelector(".carousel-nav.prev"),n=document.querySelector(".carousel-nav.next");t&&t.addEventListener("click",()=>this.move(-1)),n&&n.addEventListener("click",()=>this.move(1));const o=document.querySelector(".carousel-container");o&&(o.addEventListener("keydown",e=>{"ArrowLeft"===e.key?this.move(-1):"ArrowRight"===e.key&&this.move(1)}),o.addEventListener("mouseenter",()=>this.stopAutoPlay()),o.addEventListener("mouseleave",()=>this.startAutoPlay())),document.addEventListener("visibilitychange",()=>{document.hidden?this.stopAutoPlay():this.startAutoPlay()}),window.addEventListener("resize",debounce(()=>this.cacheElementDimensions(),250))}preloadImages(){this.eventImages.forEach((e,t)=>{if(t>0){(new Image).src=e}})}createDots(){const e=document.getElementById("carouselDots");e&&(e.innerHTML="",this.dots=[],this.slides.forEach((t,n)=>{const o=document.createElement("button");o.className="carousel-dot"+(0===n?" active":""),o.setAttribute("aria-label",`Mergi la slide ${n+1}`),o.setAttribute("aria-current",0===n?"true":"false"),o.addEventListener("click",()=>this.goToSlide(n)),e.appendChild(o),this.dots.push(o)}))}handleTouchStart(e){this.touchStartX=e.changedTouches[0].screenX}handleTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){const e=this.touchStartX-this.touchEndX;Math.abs(e)>50&&this.move(e>0?1:-1)}move(e){this.isTransitioning||(this.currentSlide=(this.currentSlide+e+this.slides.length)%this.slides.length,this.updateCarousel(),this.resetAutoPlay())}goToSlide(e){this.isTransitioning||e===this.currentSlide||(this.currentSlide=e,this.updateCarousel(),this.resetAutoPlay())}updateCarousel(){this.isTransitioning=!0,requestAnimationFrame(()=>{this.track.style.transform=`translateX(${100*-this.currentSlide}%)`,this.dots.forEach((e,t)=>{const n=t===this.currentSlide;e.classList.toggle("active",n),e.setAttribute("aria-current",n?"true":"false")})}),setTimeout(()=>{this.isTransitioning=!1},500),this.announceSlide()}announceSlide(){const e=document.createElement("div");e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.className="sr-only",e.textContent=`Slide ${this.currentSlide+1} din ${this.slides.length}`,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&document.body.removeChild(e)},1e3)}startAutoPlay(){this.autoPlayInterval||(this.autoPlayInterval=setInterval(()=>{this.move(1)},5e3))}stopAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}resetAutoPlay(){this.stopAutoPlay(),this.startAutoPlay()}}const Modal={modal:null,modalImg:null,modalCaption:null,isOpen:!1,init(){this.modal=document.getElementById("imageModal"),this.modalImg=document.getElementById("modalImage"),this.modalCaption=document.getElementById("modalCaption"),this.modal&&(this.modal.addEventListener("click",e=>{(e.target===this.modal||e.target.classList.contains("modal-close"))&&this.close()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen&&this.close()}))},open(e){if(!this.modal||!carousel)return;const t=LanguageManager.currentLang;requestAnimationFrame(()=>{this.modal.style.display="block",this.modal.offsetHeight,this.modal.classList.add("show"),this.modalImg.src=carousel.eventImages[e],this.modalImg.alt=`Imagine eveniment ${e+1}`,this.modalCaption.textContent=carousel.eventCaptions[e][t],document.body.style.overflow="hidden",this.isOpen=!0,this.modal.setAttribute("tabindex","-1"),this.modal.focus(),this.trapFocus()})},close(){this.modal&&(this.modal.classList.remove("show"),setTimeout(()=>{this.modal.style.display="none",document.body.style.overflow="",this.isOpen=!1;const e=document.querySelector(`#event${this.lastOpenedIndex+1}`);e&&e.focus()},300))},trapFocus(){const e=this.modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],n=e[e.length-1];this.modal.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))})}},PrivacyModal={modal:null,isOpen:!1,init(){this.modal=document.getElementById("privacyModal"),this.modal&&(this.modal.addEventListener("click",e=>{e.target===this.modal&&this.close()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen&&this.close()}))},open(){this.modal&&requestAnimationFrame(()=>{this.modal.style.display="block",this.modal.offsetHeight,this.modal.classList.add("show"),document.body.style.overflow="hidden",this.isOpen=!0,this.modal.setAttribute("tabindex","-1"),this.modal.focus(),this.trapFocus()})},close(){this.modal&&(this.modal.classList.remove("show"),setTimeout(()=>{this.modal.style.display="none",document.body.style.overflow="",this.isOpen=!1},300))},trapFocus(){const e=this.modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],n=e[e.length-1];this.modal.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))})}},Navigation={sections:[],navLinks:[],sectionData:[],init(){this.sections=document.querySelectorAll("section[id]"),this.navLinks=document.querySelectorAll(".nav-link"),this.cacheSectionData(),this.navLinks.forEach(e=>{e.addEventListener("click",e=>this.smoothScroll(e))}),window.addEventListener("scroll",throttle(()=>this.updateActiveSection(),100),{passive:!0}),window.addEventListener("resize",debounce(()=>this.cacheSectionData(),250)),this.updateActiveSection()},cacheSectionData(){this.sectionData=Array.from(this.sections).map(e=>({id:e.getAttribute("id"),top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight}))},smoothScroll(e){e.preventDefault();const t=e.currentTarget.getAttribute("href").slice(1),n=document.getElementById(t);if(n){const e=80,o=n.offsetTop-e;window.scrollTo({top:o,behavior:"smooth"}),MobileMenu.closeMenu(),history.pushState(null,null,`#${t}`)}},updateActiveSection(){const e=window.scrollY+100;for(const t of this.sectionData)if(e>=t.top&&e<t.bottom){requestAnimationFrame(()=>{this.navLinks.forEach(e=>{const n=e.getAttribute("href")===`#${t.id}`;e.classList.toggle("active",n),e.setAttribute("aria-current",n?"page":"false")})});break}}},AnimationObserver={init(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("fade-in"),e.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".section-paragraph, .faq-item, .service-card, .stat-item").forEach(t=>e.observe(t))}},FormHandler={init(){const e=document.querySelector(".contact-form");if(!e)return;e.addEventListener("submit",t=>{t.preventDefault(),this.handleSubmit(e)});e.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",()=>this.clearFieldError(e))})},handleSubmit(e){const t=new FormData(e);Object.fromEntries(t);if(!this.validateForm(e))return;const n=e.querySelector('button[type="submit"]'),o=n.textContent;n.textContent="Se trimite...",n.disabled=!0,setTimeout(()=>{this.showMessage("MulÈ›umim! VÄƒ vom contacta Ã®n curÃ¢nd.","success"),e.reset(),n.textContent=o,n.disabled=!1,"undefined"!=typeof gtag&&CookieConsent.hasAccepted()&&gtag("event","form_submit",{event_category:"Contact",event_label:"Consultation Request"})},1500)},validateForm(e){const t=e.querySelectorAll("[required]");let n=!0;return t.forEach(e=>{this.validateField(e)||(n=!1)}),n},validateField(e){const t=e.value.trim();let n=!0;return this.clearFieldError(e),e.hasAttribute("required")&&!t&&(this.showFieldError(e,"Acest cÃ¢mp este obligatoriu"),n=!1),"email"===e.type&&t&&!this.isValidEmail(t)&&(this.showFieldError(e,"IntroduceÈ›i o adresÄƒ de email validÄƒ"),n=!1),"tel"===e.type&&t&&!this.isValidPhone(t)&&(this.showFieldError(e,"IntroduceÈ›i un numÄƒr de telefon valid"),n=!1),n},isValidEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),isValidPhone:e=>/^(\+4|)?(07[0-8]{1}[0-9]{7}|02[0-9]{8}|03[0-9]{8})$/.test(e.replace(/\s/g,"")),showFieldError(e,t){e.classList.add("error");let n=e.nextElementSibling;n&&n.classList.contains("field-error")||(n=document.createElement("span"),n.className="field-error",e.parentNode.insertBefore(n,e.nextSibling)),n.textContent=t},clearFieldError(e){e.classList.remove("error");const t=e.nextElementSibling;t&&t.classList.contains("field-error")&&t.remove()},showMessage(e,t="info"){const n=document.createElement("div");n.className=`form-message ${t}`,n.textContent=e,n.setAttribute("role","alert");const o=document.querySelector(".contact-form");o&&(o.parentNode.insertBefore(n,o),setTimeout(()=>{n.parentNode&&n.remove()},5e3))}},PerformanceMonitor={init(){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>50&&console.warn("Long task detected:",t)});try{e.observe({entryTypes:["longtask"]})}catch(e){}}this.observeWebVitals()},observeWebVitals(){if("PerformanceObserver"in window)try{new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];console.log("LCP:",n.startTime)}).observe({entryTypes:["largest-contentful-paint"]})}catch(e){}}},EventData={upcomingEvents:{"@context":"https://schema.org","@type":"EventSeries",name:"Ateliere de Dezvoltare PersonalÄƒ",description:"Serie de workshop-uri pentru dezvoltare personalÄƒ È™i creÈ™tere interioarÄƒ",organizer:{"@type":"Person",name:"RÄƒzvan Mischie"},location:{"@type":"VirtualLocation",url:"https://consiliereonline.com/events"}},init(){this.updateEventVisibility()},updateEventVisibility(){new Date}};let carousel;window.openModal=e=>{Modal.lastOpenedIndex=e,Modal.open(e)},window.closeModal=()=>Modal.close(),window.openPrivacyModal=()=>PrivacyModal.open(),window.closePrivacyModal=()=>PrivacyModal.close(),window.moveCarousel=e=>carousel&&carousel.move(e),window.setLanguage=e=>LanguageManager.setLanguage(e),window.toggleMobileMenu=()=>MobileMenu.toggleMenu();const ServiceWorkerManager={init(){"serviceWorker"in navigator&&"file:"!==window.location.protocol&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js",{scope:"./"}).then(e=>{console.log("ServiceWorker registration successful with scope:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&this.showUpdateNotification()})})}).catch(e=>{console.log("ServiceWorker registration failed:",e)})})},showUpdateNotification(){const e=document.createElement("div");e.className="update-notification",e.innerHTML='\n            <p>O versiune nouÄƒ este disponibilÄƒ!</p>\n            <button onclick="window.location.reload()">ActualizeazÄƒ</button>\n        ',e.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: var(--primary-color);\n            color: var(--secondary-color);\n            padding: 1rem;\n            border-radius: 8px;\n            z-index: 9999;\n            box-shadow: var(--shadow-lg);\n        ",document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.remove()},1e4)}};document.addEventListener("DOMContentLoaded",()=>{console.log("ðŸš€ Consiliere Online - Initializing...");try{CookieConsent.init(),LanguageManager.init(),MobileMenu.init(),Navigation.init(),Modal.init(),PrivacyModal.init(),AnimationObserver.init(),FormHandler.init(),EventData.init(),ServiceWorkerManager.init(),PerformanceMonitor.init(),carousel=new Carousel,carousel.init(),console.log("âœ… All modules initialized successfully"),window.dispatchEvent(new CustomEvent("consiliereonlineReady",{detail:{timestamp:Date.now()}}))}catch(e){console.error("âŒ Initialization error:",e),document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.lang;document.body.classList.toggle("lang-ro","ro"===t)})})}}),window.addEventListener("error",e=>{console.error("Global error:",e.error),"undefined"!=typeof gtag&&CookieConsent.hasAccepted()&&gtag("event","exception",{description:e.error.message,fatal:!1})}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),"undefined"!=typeof gtag&&CookieConsent.hasAccepted()&&gtag("event","exception",{description:e.reason?.message||"Promise rejection",fatal:!1})}),"undefined"!=typeof module&&module.exports&&(module.exports={CookieConsent:CookieConsent,LanguageManager:LanguageManager,MobileMenu:MobileMenu,Carousel:Carousel,Modal:Modal,PrivacyModal:PrivacyModal,Navigation:Navigation,AnimationObserver:AnimationObserver,FormHandler:FormHandler,PerformanceMonitor:PerformanceMonitor,EventData:EventData});